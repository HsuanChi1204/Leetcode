# Union Find Solution


## âœ¨ Union-Find æ˜¯ä»€éº¼ï¼Ÿ

Union-Findï¼ˆä¸¦æŸ¥é›†ï¼‰æ˜¯ä¸€ç¨®ç”¨ä¾†è§£æ±ºï¼š
- ã€Œé›†åˆåˆä½µã€å•é¡Œ
- ã€Œå¿«é€ŸæŸ¥è©¢å…©å€‹å…ƒç´ æ˜¯å¦å±¬æ–¼åŒä¸€é›†åˆã€

åœ¨åœ–è«–å•é¡Œä¸­ç‰¹åˆ¥å¸¸è¦‹ï¼Œå°¤å…¶æ˜¯ï¼š
- åˆ¤æ–·ã€Œå…©å€‹ç¯€é»æ˜¯å¦é€£é€šã€
- æª¢æŸ¥ã€Œæ˜¯å¦æœ‰ç’°å­˜åœ¨ã€
- å»ºç«‹ã€Œæœ€å°ç”Ÿæˆæ¨¹ã€ï¼ˆKruskal æ¼”ç®—æ³•ï¼‰


## âœ¨ åŸºæœ¬æ¦‚å¿µ

Union-Find çµæ§‹é€šå¸¸åŒ…å«å…©å€‹é™£åˆ—ï¼š

| åç¨± | èªªæ˜ |
|:----|:----|
| `parent[i]` | è¨˜éŒ„ç¯€é» `i` çš„çˆ¶ç¯€é»ï¼ˆæˆ–è‡ªå·±æ˜¯è‡ªå·±çš„ä»£è¡¨ï¼‰ |
| `rank[i]`ï¼ˆæˆ– `size[i]`ï¼‰ | è¨˜éŒ„é›†åˆçš„å¤§å°æˆ–æ¨¹çš„é«˜åº¦ï¼ˆç”¨æ–¼å„ªåŒ–åˆä½µï¼‰ |



## âœ¨ å…©å€‹æ ¸å¿ƒæ“ä½œ

### 1. `find(x)`
æ‰¾åˆ°å…ƒç´  `x` æ‰€å±¬é›†åˆçš„ä»£è¡¨å…ƒç´ ï¼ˆæ ¹ç¯€é»ï¼‰ã€‚

åŸºæœ¬ç‰ˆï¼š
```python
def find(x):
    if parent[x] != x:
        parent[x] = find(parent[x])  # è·¯å¾‘å£“ç¸®ï¼šç›´æ¥æ¥åˆ°æ ¹ç¯€é»
    return parent[x]
```

- **è·¯å¾‘å£“ç¸®ï¼ˆPath Compressionï¼‰**ï¼š
  - æŠŠæœå°‹éçš„ç¯€é»ç›´æ¥é€£åˆ°æ ¹ç¯€é»
  - å¯ä»¥å¤§å¹…é™ä½å¾ŒçºŒæŸ¥è©¢æ™‚é–“



### 2. `union(x, y)`
å°‡å…ƒç´  `x` å’Œ `y` æ‰€å±¬çš„é›†åˆåˆä½µã€‚

åŸºæœ¬ç‰ˆï¼š
```python
def union(x, y):
    rootX = find(x)
    rootY = find(y)

    if rootX == rootY:
        return False  # å·²ç¶“åœ¨åŒä¸€é›†åˆï¼Œä¸éœ€è¦å†åˆä½µ

    # ä»¥rankå„ªåŒ–ï¼šå°æ¨¹æ¥åˆ°å¤§æ¨¹
    if rank[rootX] > rank[rootY]:
        parent[rootY] = rootX
        rank[rootX] += rank[rootY]
    else:
        parent[rootX] = rootY
        rank[rootY] += rank[rootX]
    
    return True
```

- **ä»¥ç§©åˆä½µï¼ˆUnion by Rankï¼‰**ï¼š
  - å°‡å°çš„é›†åˆä½µå…¥å¤§çš„é›†åˆ
  - ä¿æŒæ¨¹çš„é«˜åº¦æœ€å°ï¼Œæå‡æ•ˆç‡



## âœ¨ ä½¿ç”¨æµç¨‹èˆ‰ä¾‹

å‡è¨­æœ‰ 5 å€‹ç¯€é»ï¼Œåˆå§‹ï¼š
```
parent = [0, 1, 2, 3, 4]
rank = [1, 1, 1, 1, 1]
```

é€²è¡Œï¼š
```python
union(0, 1)
union(1, 2)
union(3, 4)
```

çµæœï¼š
- 0ã€1ã€2 åœ¨åŒä¸€é›†åˆ
- 3ã€4 åœ¨åŒä¸€é›†åˆ
- 5 å€‹ç¯€é»çµ„æˆ 2 å€‹é›†åˆ

---

## âœ¨ ç‚ºä»€éº¼ Union-Find å¾ˆå¿«ï¼Ÿ

ç¶“éã€Œè·¯å¾‘å£“ç¸®ã€+ã€Œä»¥ç§©åˆä½µã€å¾Œï¼š
- æ¯æ¬¡ `find` èˆ‡ `union` çš„æ™‚é–“è¤‡é›œåº¦æ¥è¿‘ **O(1)**ï¼
- å¯¦éš›æ™‚é–“è¤‡é›œåº¦æ˜¯ **O(Î±(N))**ï¼Œå…¶ä¸­ Î± æ˜¯é˜¿å…‹æ›¼å‡½æ•¸çš„åå‡½æ•¸ï¼Œå¢é•·æ¥µæ…¢ï¼Œå¹¾ä¹å¯è¦–ç‚ºå¸¸æ•¸ã€‚

---

## âœ¨ Union-Find å¸¸è¦‹æ‡‰ç”¨

| é¡Œå‹ | èªªæ˜ |
|:----|:----|
| é€£é€šæ€§æª¢æŸ¥ | åˆ¤æ–·å…©å€‹ç¯€é»æ˜¯å¦å±¬æ–¼åŒä¸€é›†åˆ |
| ç’°æª¢æŸ¥ï¼ˆCycle Detectionï¼‰ | åŠ é‚Šæ™‚å¦‚æœå…©ç¯€é»å·²é€£é€šï¼Œèªªæ˜æœ‰ç’°å‡ºç¾ |
| æœ€å°ç”Ÿæˆæ¨¹ï¼ˆMSTï¼‰Kruskal | åœ¨é¸é‚Šæ™‚é˜²æ­¢å½¢æˆç’° |
| è¯é€šå­åœ–å€‹æ•¸ | æ•¸æœ‰å¤šå°‘ç¨ç«‹çš„é›†åˆ |

---

## âœ¨ å°ç·´ç¿’ï¼šè‡ªå·±å¯«ä¸€å€‹ Union-Find

```python
class UnionFind:
    def __init__(self, size):
        self.parent = [i for i in range(size)]
        self.rank = [1] * size

    def find(self, x):
        if self.parent[x] != x:
            self.parent[x] = self.find(self.parent[x])
        return self.parent[x]

    def union(self, x, y):
        rootX = self.find(x)
        rootY = self.find(y)

        if rootX == rootY:
            return False

        if self.rank[rootX] > self.rank[rootY]:
            self.parent[rootY] = rootX
            self.rank[rootX] += self.rank[rootY]
        else:
            self.parent[rootX] = rootY
            self.rank[rootY] += self.rank[rootX]
        return True
```

ç¯„ä¾‹æ“ä½œï¼š
```python
uf = UnionFind(5)
uf.union(0, 1)
uf.union(1, 2)
print(uf.find(2))  # æ‡‰è©²æœƒå›å‚³ 0ï¼ˆè·¯å¾‘å£“ç¸®å¾Œï¼‰
print(uf.find(4))  # 4 é‚„æ˜¯è‡ªå·±ä¸€çµ„
```


# ğŸ“ ç¸½çµ

- Union-Find ç”¨ä¾†è™•ç†é›†åˆç®¡ç†ã€é›†åˆåˆä½µã€é€£é€šæ€§å•é¡Œ
- å…©å¤§å„ªåŒ–æŠ€å·§ï¼š**è·¯å¾‘å£“ç¸®**ã€**ä»¥ç§©åˆä½µ**
- é«˜æ•ˆæ‡‰å°åœ–è«–ä¸­çš„ã€Œé€£é€šæ€§ã€å’Œã€Œç’°æª¢æŸ¥ã€
- å¸¸è¦‹æ–¼ï¼šæœ‹å‹åœˆå•é¡Œã€å†—é¤˜é€£ç·šã€æœ€å°ç”Ÿæˆæ¨¹ï¼ˆMSTï¼‰ç­‰é¡Œç›®